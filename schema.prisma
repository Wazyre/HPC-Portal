datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
    directUrl = env("DIRECT_URL")
}

generator client {
    provider = "prisma-client"
    previewFeatures = ["relationJoins"]
    binaryTargets = ["native", "debian-openssl-3.0.x"] // For running on Render platform
    output = "./generated/prisma"
}

model User {
    id          Int         @id @default(autoincrement())
    email       String      @unique
    password    String
    firstName   String
    lastName    String
    company     String
    role        String
    comments    Comment[]
}

model Support {
    id          Int         @id @default(autoincrement())
    email       String      
    name        String
    subject     String
    description String
    status      String
    createdAt   DateTime    @default(now())
    updatedAt   DateTime    @default(now())
    comments    Comment[]
}

model Comment {
    id          Int         @id @default(autoincrement())
    comment     String
    author      User        @relation(fields: [authorId], references: [id])
    authorId    Int         
    createdAt   DateTime
    ticket      Support     @relation(fields: [ticketId], references: [id])
    ticketId    Int
}